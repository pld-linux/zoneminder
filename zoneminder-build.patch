--- ZoneMinder-1.24.2/src/zm_utils.cpp.org	2009-07-12 19:45:34.387460575 +0200
+++ ZoneMinder-1.24.2/src/zm_utils.cpp	2009-07-12 19:46:00.454902859 +0200
@@ -21,6 +21,7 @@
 #include "zm_utils.h"
 
 #include <stdarg.h>
+#include <stdio.h>
 
 const std::string stringtf( const char *format, ... )
 {
--- ZoneMinder-1.24.2/scripts/zmfilter.pl.in~	2009-06-08 11:16:04.000000000 +0200
+++ ZoneMinder-1.24.2/scripts/zmfilter.pl.in	2011-01-20 11:03:41.575750088 +0100
@@ -270,7 +270,7 @@
         my $sql = "select E.Id,E.MonitorId,M.Name as MonitorName,M.DefaultRate,M.DefaultScale,E.Name,E.Cause,E.Notes,E.StartTime,unix_timestamp(E.StartTime) as Time,E.Length,E.Frames,E.AlarmFrames,E.TotScore,E.AvgScore,E.MaxScore,E.Archived,E.Videoed,E.Uploaded,E.Emailed,E.Messaged,E.Executed from Events as E inner join Monitors as M on M.Id = E.MonitorId where not isnull(E.EndTime)";
 	    $db_filter->{Sql} = '';
 
-        if ( @{$filter_expr->{terms}} )
+        if ( $filter_expr->{terms} and @{$filter_expr->{terms}} )
         {
             for ( my $i = 0; $i < @{$filter_expr->{terms}}; $i++ )
             {
